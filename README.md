# Nix Flake Builder [![built with nix](https://builtwithnix.org/badge.svg)](https://builtwithnix.org)


This script allows you to generate a flake.nix file for a custom Nix development environment by selecting packages via fuzzy search. It interacts with the Nix package manager to create a tailored development shell configuration that can run on any supported system.

## Prerequisites

Before running the script, make sure you have the following installed:

- fzf - Fuzzy finder used for searching packages.
- jq - Command-line JSON processor.

## Usage

1. Run the script: Execute the script to begin interacting with the package search.
```bash
./nix-flake-builder.sh
```
2. Search for packages: The script will prompt you to enter the name of a package you want to search for. You can use fuzzy search to quickly find and select packages.

3. Add packages: Once you find the desired package, select it, and it will be added to your list of packages. You can continue adding packages or finish the selection process.

4. Generate flake.nix: After selecting all the required packages, the script will generate a flake.nix file in the ~/generated_flake directory. This file includes the selected packages and a development shell configuration.

5. Enter development shell: To use the generated flake.nix, navigate to the ~/generated_flake directory and run the following command:

```bash
cd ~/generated_flake
nix develop
```
This will drop you into the Nix development shell with the selected packages available.

## Key Features

- System-Aware: The script automatically detects your system type using Nix, ensuring the generated flake.nix works across any supported system, providing a seamless experience for users on different platforms.
- Package Search: Fuzzy search through available Nix packages.
- Dynamic Package List: Add multiple packages to the flake.nix file interactively.
- Custom Development Shell: Generates a tailored Nix development shell configuration with your selected packages.
- Colored Output: The script uses colored output to highlight status messages, making it easier to follow the process.

## Example Output

```nix
{
  description = "Custom Nix flake generated by nix-flake-builder";

  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    flake-utils.url = "github:numtide/flake-utils";
  };

  outputs = { self, nixpkgs, flake-utils, ... }:
    flake-utils.lib.eachDefaultSystem (system:
      let
        pkgs = import nixpkgs {
          inherit system;
        };
      in
      {
        devShells.default = pkgs.mkShell {
          buildInputs = with pkgs; [
          nixpkgs.legacyPackages.x86_64-linux.python312Full
          nixpkgs.legacyPackages.x86_64-linux.python312Packages.jupyterlab
          nixpkgs.legacyPackages.x86_64-linux.python312Packages.numpy
          nixpkgs.legacyPackages.x86_64-linux.python312Packages.pandas
          ];

          shellHook = ''
            export PS1="\[\033[1;34m\][nix-dev:\w]$ \[\033[0m\]"
            echo -e "\033[1;32m==> Entering Nix development shell on ''${system}\033[0m"
            echo -e "\033[1;34mPackages available:\033[0m"
            echo ''${buildInputs} | tr ' ' '\n' | sed 's/^/  - /'
          '';
        };
      }
    );
}
```

## License

This project is licensed under the MIT License.
[LICENSE](LICENSE)